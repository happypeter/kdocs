2008_5_12
it is almost a month since I added epoch checking for axtu.
Now they see a releated problem.
irqbanlance 13 will show up on install list even though 0.55 is installed already
Hwanii said he has check the header file of irqbanlance, nothing strange is found
>>>
when I 
rpm -e 0.55
then both 0.55 and 1.3 are on installlist, crazy!
>>>
SO now if 13 is installed, 0.55 will show up on updatelist----good
 13 will show on installlist---bad
update from 55 to 13, then nothing on updatelist----good
but 13 will still show on installlist---bad
when I reverse my patch for epoch, the install list is right-----so it is my fault

>>>now I will concentrate on how Install list is generated.
Finally I find irq and most packages are added to installlost with the following code
<pre>
 else if(strNameL > strNameR)
                {
   // INSTALL CASE BY      NAME
   AddUpdateInstallList(&fileInfo,strNameR,strVerR, \
                                strRelR,itRemote->strEpoch,strArchR, \
                                itRemote->nType,false /*itRemote->bSelfUpdate*/,false);

                        if(itRemote != m_setRemoteHeaderInfo.end()) itRemote++;
                        nCount++;
                }
</pre>

>>>so It is all about my logic
when i comment out
itRemote=it_1; 
no irq will show up on installlist.
so by overwite itRemote, the name comparision is wrong
so the solution could be add some tmp iteartor to handle epoch case.
leaving itRemote untouched.

<pre>

                        }
                        nCount++;
                        stripNVRA(itRemote->strNVRA, &strNameR, &strVerR, &strRelR, &strArchR);
                //peter
                        if((itRemote->strEpoch)!=(it_1->strEpoch))
                        {
                                while(!(strOldName2 != strNameR || (strOldName2 == strNameR && !
CheckArch(strOldArch2 , strArchR))))
                                {// now we need to concern about epoch
                                if((itRemote->strEpoch)>(it_1->strEpoch))
                                it_1=itRemote;
                                itRemote++;
                                stripNVRA(itRemote->strNVRA, &strNameR, &strVerR, &strRelR, &str
ArchR);
                                }
                                itRemote--;
                                stripNVRA(it_1->strNVRA, &strNameR, &strVerR, &strRelR, &strArch
R);
                                break;
                        }
                //peter
                        else
                        {  //now we have no epoch issued
                                if(strOldName2 != strNameR || (strOldName2 == strNameR && !Check
Arch(strOldArch2 , strArchR)))
                                {
                                itRemote--;
                                nCount--;

</pre>

>>>

cacheDirInfo.strHeaderInfoFile = strTemp + "/header.info";

 if( access(it->strHeaderInfoFile.c_str(), F_OK) == 0)

